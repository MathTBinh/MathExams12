<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Chuy√™n ƒê·ªÅ THI TO√ÅN - Chuy√™n ƒê·ªÅ S·ªê 3 v·ªõi 22 c√¢u h·ªèi tr·∫Øc nghi·ªám v√† l·ªùi gi·∫£i chi ti·∫øt, k√®m t√≥m t·∫Øt ki·∫øn th·ª©c." name="description"/>
<title>Chuy√™n ƒê·ªÅ THI TO√ÅN - Chuy√™n ƒê·ªÅ 3 - KH√ìA H·ªåC TO√ÅN TH·∫¶Y B√åNH</title>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&amp;display=swap" rel="stylesheet"/>
<style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #ecfdf5, #f3e8ff);
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        .header {
            position: sticky;
            top: 0;
            background: white;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 1000;
            margin-bottom: 17px;
            border-radius: 10px;
            text-align: center;
        }
        .header .logo {
            font-size: 1.2rem;
            font-weight: bold;
            color: #6b21a8;
        }
        .nav-bar {
         position: sticky;
  top: 0;
  background-color: #c62828;   
  color: #fff176;    
  padding: 4px 10px;
  height: 40px;
  font-size: 14px;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

        .nav-bar a {
            color: #fff176;
            margin-right: 15px;
            text-decoration: none;
            font-weight: 700;
        }
        .nav-bar a:hover {
            color: #10b981;
        }
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-button {
            background: #6b21a8;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 700;
            transition: background 0.3s;
        }
        .dropdown-button:hover {
            background: #5b1a8b;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background: white;
            min-width: 100px;
            max-height: 300px;
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            z-index: 1;
            border-radius: 10px;
            right: 0;
        }
        .dropdown-content a {
            color: #6b21a8;
            padding: 8px 16px;
            text-decoration: none;
            display: block;
            font-weight: 400;
        }
        .dropdown-content a:hover {
            background: #f0fdf4;
            color: #10b981;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s;
        }
        .card:hover {
            transform: translateY(-8px);
        }
        h1 {
            color: #6b21a8;
            text-align: center;
            font-size: 2rem;
            margin-bottom: 30px;
        }
        h2 {
            color: #10b981;
            font-size: 2rem;
            margin-bottom: 15px;
        }
        h3 {
            color: #c62828;
            font-size: 1.5rem;
            margin-bottom: 10px;
        }
        .summary-box {
             background-color: #0b3a2e;
            color: #ffffff;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 5px solid #ef4444;
        }
        .options {
            margin: 10px 0;
        }
        .option {
            margin: 5px 0;
        }
        .answer-check {
            margin-top: 10px;
        }
        .answer-check button {
            padding: 12px 24px;
            background: #6b21a8;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .answer-check button:hover {
            background: #5b1a8b;
        }
        .answer-feedback {
            margin-top: 10px;
            font-weight: bold;
        }
        .correct {
            color: #22c55e;
        }
        .incorrect {
            color: #ef4444;
        }
        .solution {
         background-color: #0b3a2e;
        color: #ffffff;
         font-family: 'Courier New', 'Segoe Script', cursive;
         padding: 10px;
        margin-top: 5px;
        border-radius: 8px;
        border: 1px solid #0a2e23;
        box-shadow: 2px 2px 8px rgba(0,0,0,0.4);
        display: none;
        max-width: 1000px;
        min-height: 500px;
        white-space: pre-wrap;
        line-height: 1.0;
         }
       
        .solution.visible {
         display: block;
         }

        .solution-toggle {
         margin-left: 10px;
         padding: 4px 10px;
         cursor: pointer;
        background-color: #0b3a2e;
        color: white;
         border: 1px solid white;
        border-radius: 4px;
        }

        .solution-toggle:hover {
         background-color: #145a47;
        }
        
        .hot {
            color: #ef4444;
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        table, th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        th {
            background: #6b21a8;
            color: white;
        }
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .navigation button {
            padding: 12px 24px;
            background: #6b21a8;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background 0.3s;
        }
        .navigation button:hover {
            background: #5b1a8b;
        }
        .navigation button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        @media (max-width: 640px) {
            h1 { font-size: 1.6rem; }
            h2 { font-size: 1.6rem; }
            h3 { font-size: 1.3rem; }
            .card { padding: 15px; }
            .header .logo { font-size: 1.4rem; }
            .nav-bar { top: 50px; flex-direction: column; align-items: flex-start; }
            .nav-bar a { font-size: 0.9rem; margin-right: 10px; }
            .dropdown-button { font-size: 0.9rem; padding: 6px 12px; }
            .dropdown-content { min-width: 80px; }
            table { font-size: 0.85rem; }
            .answer-check button, .navigation button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
            .score-section {
    background-color: #ecfdf5;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    text-align: center;
}

#score-result {
    margin-top: 10px;
    font-weight: bold;
}

#score-result.correct {
    color: #22c55e;
}

#score-result.incorrect {
    color: #ef4444;
}
        }
    
.question img, .solution img {
    display: block;
    margin: 10px auto;
    width: 400px;
    height: 300px;
    object-fit: contain;
    object-position: center;
    background: white;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%;
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* Gi·∫£m kho·∫£ng c√°ch */
    width: 300px; /* Gi·∫£m chi·ªÅu r·ªông */
    height: 100px; /* Gi·∫£m chi·ªÅu cao */
    object-fit: contain;
    object-position: center;
    background: white;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* ƒê·∫£m b·∫£o v·ª´a v·ªõi m√†n h√¨nh nh·ªè */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        width: 100%; /* Chi·ªÅu r·ªông 100% tr√™n di ƒë·ªông */
        height: auto; /* Chi·ªÅu cao t·ª± ƒë·ªông */
        margin: 3px auto; /* Gi·∫£m th√™m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* Kho·∫£ng c√°ch tr√™n laptop */
    width: 300px; /* Chi·ªÅu r·ªông m·∫∑c ƒë·ªãnh */
    height: 200px; /* Chi·ªÅu cao m·∫∑c ƒë·ªãnh */
    object-fit: contain;
    object-position: center;
    background: #0b3a2e;
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* ƒê·∫£m b·∫£o v·ª´a v·ªõi m√†n h√¨nh nh·ªè */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        max-width: 100%; /* Thu nh·ªè theo m√†n h√¨nh */
        width: auto; /* T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu r·ªông */
        height: auto; /* T·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh chi·ªÅu cao */
        margin: 2px auto; /* Gi·∫£m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}

.question img, .solution img {
    display: block;
    margin: 5px auto; /* CƒÉn gi·ªØa v√† gi·ªØ kho·∫£ng c√°ch nh·ªè */
}
.question img.long-image, .solution img.long-image {
    height: auto;
    max-width: 100%; /* Gi·ªõi h·∫°n chi·ªÅu r·ªông t·ªëi ƒëa */
}
.question img:not([src]), .solution img:not([src]),
.question img[src=''], .solution img[src=''],
.question img[onerror], .solution img[onerror] {
    display: none !important; /* ·∫®n ·∫£nh kh√¥ng t·ªìn t·∫°i */
}
@media (max-width: 640px) {
    .question img, .solution img {
        margin: 2px auto; /* Gi·∫£m kho·∫£ng c√°ch tr√™n di ƒë·ªông */
    }
    .question img.long-image, .solution img.long-image {
        max-width: 100%;
        height: auto;
    }
}
.latex-solution {
  background-color: rgba(0, 0, 0, 0.4);
  color: white;
  font-family: Courier New, monospace;
  font-size: 18px;
  border-radius: 6px;
  padding: 6px;
}
/* th√™m v·∫Ω */
#drawCanvas {
  position: fixed;
  top: 0;
  left: 0;
  z-index: 9998;
  touch-action: none;
}


.toolbar {
  position: fixed;
  top: 100px;
  left: 10px;
  background: white;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  padding: 6px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 4px;
  width: 48px;
  align-items: center;
}
.toolbar button,
.toolbar select,
.toolbar input[type="color"],
.toolbar input[type="range"] {
  width: 100%;
  font-size: 10px;
  padding: 2px;
  height: 28px;
  box-sizing: border-box;
}

.floating-button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10001;
  background: #6b21a8;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 50px;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
</style>
<style>
input[type="text"].short-answer {
  width: 120px;
  padding: 6px;
  background-color: #f0f9ff;
  border: 2px solid #ccc;
  border-radius: 4px;
  font-size: 16px;
  margin-right: 8px;
}
</style>
</head>
<!-- Canvas v√† thanh c√¥ng c·ª• v·∫Ω n·ªïi -->
<canvas id="drawCanvas" style="display: none;"></canvas>
<div class="toolbar" id="drawToolbar" style="display: none;">
  <select id="tool">
    <option value="pen">‚úèÔ∏è B√∫t</option>
    <option value="line">üìè ƒê∆∞·ªùng</option>
    <option value="rect">‚¨õ Ch·ªØ nh·∫≠t</option>
    <option value="circle">‚ö™ Tr√≤n</option>
    <option value="cube">üì¶ H·ªôp</option>
<option value="cone">üî∫ N√≥n</option>
<option value="cylinder">‚¨§ Tr·ª•</option>
<option value="pyramid">üîª Ch√≥p</option>
<option value="sphere">‚öΩ C·∫ßu</option>
  </select>
  
<input type="range" id="draw-width" min="1" max="5" value="2" />
  <input type="color" id="colorPicker" value="#6b21a8" />
  <button id="clearBtn">üßπ Xo√°</button>
  <button id="saveBtn">üíæ L∆∞u</button>
  <button id="exitBtn">‚ùå Tho√°t</button>
  
</div>
<button id="toggleDraw" class="floating-button">üñäÔ∏è V·∫Ω</button>
<body>
<div class="header">
<div class="logo">KH√ìA H·ªåC TO√ÅN TH·∫¶Y B√åNH</div>
</div>
<div class="nav-bar">
<div>
<a href="index.html">Trang ch·ªß</a>
<a href="https://meet.google.com/hje-gfpk-erv">H·ªçc online </a>
</div>
<!-- Th√™m ph·∫ßn ghi m√†n h√¨nh -->
    <div class="recording-controls" style="margin: 3px 0; padding: 5px; background-color: #f0f0f0; border-radius: 5px;">
        <button id="startRecording" style="padding: 3px 5px; margin: 0 5px; background-color: #4CAF50; color: white; border: none; border-radius: 3px;">Record</button>
        <button id="stopRecording" style="padding: 3px 5px; margin: 0 5px; background-color: #f44336; color: white; border: none; border-radius: 3px;">Stop</button>
        <button id="pauseRecording" style="padding: 3px 5px; margin: 0 5px; background-color: #ff9800; color: white; border: none; border-radius: 3px;">Pause</button>
        <video id="videoPreview" controls style="display: none; margin-top: 10px; width: 320px; height: 240px;"></video>
        <br>
        <a id="downloadLink" style="display: none; margin-top: 5px;">Download Video</a>
    </div>
<div class="dropdown">
<span class="dropdown-button">Ch·ªçn ƒë·ªÅ</span>
<div class="dropdown-content">
<!-- T·∫°o danh s√°ch ƒë·ªÅ t·ª´ 1 ƒë·∫øn 100 -->
<a href="de1.html">ƒê·ªÅ 1</a>
<a href="de2.html">ƒê·ªÅ 2</a>
<a href="de3.html">ƒê·ªÅ 3</a>
<a href="de4.html">ƒê·ªÅ 4</a>
<a href="de5.html">ƒê·ªÅ 5</a>
<a href="de6.html">ƒê·ªÅ 6</a>
<a href="de7.html">ƒê·ªÅ 7</a>
<a href="de8.html">ƒê·ªÅ 8</a>
<a href="de9.html">ƒê·ªÅ 9</a>
<a href="de10.html">ƒê·ªÅ 10</a>
<a href="de11.html">ƒê·ªÅ 11</a>
<a href="de12.html">ƒê·ªÅ 12</a>
<a href="de13.html">ƒê·ªÅ 13</a>

</div>
</div>
</div>
<!--@@-->
<div class="container">
<h1>ƒê·ªÄ THI V·ªÄ ƒê√çCH - ƒê·ªÄ S·ªê 4 <span class="hot">HOT</span></h1>

<h3>Ph·∫ßn I: Tr·∫Øc Nghi·ªám Nhi·ªÅu L·ª±a Ch·ªçn - t·ª´ c√¢u 1 ƒë·∫øn c√¢u 12</h3>

<!-- C√¢u 1 -->
<div class="question" id="q1">
<div class="summary-box">
<p><strong>C√¢u 1</strong>. Cho h√†m s·ªë \( y = f(x) \) c√≥ ƒë·ªì th·ªã nh∆∞ H√¨nh 1.<br/>
T·ªça ƒë·ªô t√¢m ƒë·ªëi x·ª©ng c·ªßa ƒë·ªì th·ªã h√†m s·ªë ƒë√£ cho l√†:</p>
<img alt="" loading="lazy" src="data/anh2/5.1.png"/><br/>

<div class="options">
<label><input name="q1" onchange="showOptionIcon('q1', 'A', 'C')" type="radio" value="A"/> A. \( (-1 ; 0) \)<span class="option-icon" id="icon-q1-A"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'B', 'C')" type="radio" value="B"/> B. \( (0 ; 1) \)<span class="option-icon" id="icon-q1-B"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'C', 'C')" type="radio" value="C"/> C. \( (-1 ; 1) \)<span class="option-icon" id="icon-q1-C"></span></label>
<label><input name="q1" onchange="showOptionIcon('q1', 'D', 'C')" type="radio" value="D"/> D. \( (1 ; -3) \)<span class="option-icon" id="icon-q1-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q1', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q1')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q1"></div>
</div>
</div>

<!-- C√¢u 2 -->
<div class="question" id="q2">
<div class="summary-box">
<p><strong>C√¢u 2</strong>. Cho h√†m s·ªë \( y = \frac{a x^2 + b x + c}{m x + n}, (a m \neq 0) \) c√≥ ƒë·ªì th·ªã nh∆∞ H√¨nh 2.<br/>
Ph∆∞∆°ng tr√¨nh ƒë∆∞·ªùng ti·ªám c·∫≠n xi√™n c·ªßa ƒë·ªì th·ªã h√†m s·ªë ƒë√£ cho l√†:</p>
<img alt="" loading="lazy" src="data/anh2/5.2.png"/><br/>

<div class="options">
<label><input name="q2" onchange="showOptionIcon('q2', 'A', 'C')" type="radio" value="A"/> A. \( y = 2x \)<span class="option-icon" id="icon-q2-A"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'B', 'C')" type="radio" value="B"/> B. \( y = -x \)<span class="option-icon" id="icon-q2-B"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'C', 'C')" type="radio" value="C"/> C. \( y = x \)<span class="option-icon" id="icon-q2-C"></span></label>
<label><input name="q2" onchange="showOptionIcon('q2', 'D', 'C')" type="radio" value="D"/> D. \( y = -2x \)<span class="option-icon" id="icon-q2-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q2', 'C')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q2')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q2"></div>
</div>
</div>

<!-- C√¢u 3 -->
<div class="question" id="q3">
<div class="summary-box">
<p><strong>C√¢u 3</strong>. H√†m s·ªë n√†o sau ƒë√¢y l√† m·ªôt nguy√™n h√†m c·ªßa h√†m s·ªë \( f(x) = 15^x \)?</p>

<div class="options">
<label><input name="q3" onchange="showOptionIcon('q3', 'A', 'D')" type="radio" value="A"/> A. \( F_1(x) = 15^x \)<span class="option-icon" id="icon-q3-A"></span></label>
<label><input name="q3" onchange="showOptionIcon('q3', 'B', 'D')" type="radio" value="B"/> B. \( F_2(x) = 15^x \ln 15 \)<span class="option-icon" id="icon-q3-B"></span></label>
<label><input name="q3" onchange="showOptionIcon('q3', 'C', 'D')" type="radio" value="C"/> C. \( F_3(x) = \frac{15^x}{\log 15} \)<span class="option-icon" id="icon-q3-C"></span></label>
<label><input name="q3" onchange="showOptionIcon('q3', 'D', 'D')" type="radio" value="D"/> D. \( F_4(x) = \frac{15^x}{\ln 15} \)<span class="option-icon" id="icon-q3-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q3', 'D')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q3')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q3"></div>
</div>
</div>

<!-- C√¢u 4 -->
<div class="question" id="q4">
<div class="summary-box">
<p><strong>C√¢u 4</strong>. Trong kh√¥ng gian t·ªça ƒë·ªô \( Oxyz \), ph∆∞∆°ng tr√¨nh n√†o sau ƒë√¢y l√† ph∆∞∆°ng tr√¨nh t·ªïng qu√°t c·ªßa m·∫∑t ph·∫≥ng?</p>

<div class="options">
<label><input name="q4" onchange="showOptionIcon('q4', 'A', 'A')" type="radio" value="A"/> A. \( 2x + 3y + z - 1 = 0 \)<span class="option-icon" id="icon-q4-A"></span></label>
<label><input name="q4" onchange="showOptionIcon('q4', 'B', 'A')" type="radio" value="B"/> B. \( x^2 + y - z + 3 = 0 \)<span class="option-icon" id="icon-q4-B"></span></label>
<label><input name="q4" onchange="showOptionIcon('q4', 'C', 'A')" type="radio" value="C"/> C. \( x - y^2 + 3z - 6 = 0 \)<span class="option-icon" id="icon-q4-C"></span></label>
<label><input name="q4" onchange="showOptionIcon('q4', 'D', 'A')" type="radio" value="D"/> D. \( x + y + z^2 - 7 = 0 \)<span class="option-icon" id="icon-q4-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q4', 'A')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q4')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q4"></div>
</div>
</div>

<!-- C√¢u 5 -->
<div class="question" id="q5">
<div class="summary-box">
<p><strong>C√¢u 5</strong>. Trong kh√¥ng gian t·ªça ƒë·ªô \( Oxyz \), vector n√†o sau ƒë√¢y l√† vector ch·ªâ ph∆∞∆°ng c·ªßa ƒë∆∞·ªùng th·∫≥ng \( \Delta: \left\{\begin{array}{l} x = -4 + 2t \\ y = 7 - 3t \\ z = 8 - 9t \end{array}\right. \)?</p>

<div class="options">
<label><input name="q5" onchange="showOptionIcon('q5', 'A', 'D')" type="radio" value="A"/> A. \( \vec{u}_1 = (4 ; 7 ; 8) \)<span class="option-icon" id="icon-q5-A"></span></label>
<label><input name="q5" onchange="showOptionIcon('q5', 'B', 'D')" type="radio" value="B"/> B. \( \vec{u}_2 = (-4 ; 7 ; 8) \)<span class="option-icon" id="icon-q5-B"></span></label>
<label><input name="q5" onchange="showOptionIcon('q5', 'C', 'D')" type="radio" value="C"/> C. \( \vec{u}_3 = (2 ; 3 ; 9) \)<span class="option-icon" id="icon-q5-C"></span></label>
<label><input name="q5" onchange="showOptionIcon('q5', 'D', 'D')" type="radio" value="D"/> D. \( \vec{u}_4 = (2 ; -3 ; -9) \)<span class="option-icon" id="icon-q5-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q5', 'D')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q5')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q5"></div>
</div>
</div>

<!-- C√¢u 6 -->
<div class="question" id="q6">
<div class="summary-box">
<p><strong>C√¢u 6</strong>. Trong kh√¥ng gian t·ªça ƒë·ªô \( Oxyz \), cho m·∫∑t c·∫ßu \( (S): (x + 3)^2 + (y - 9)^2 + (z + 12)^2 = 5^2 \). B√°n k√≠nh c·ªßa m·∫∑t c·∫ßu \( (S) \) l√†:</p>

<div class="options">
<label><input name="q6" onchange="showOptionIcon('q6', 'A', 'B')" type="radio" value="A"/> A. \( 5^4 \)<span class="option-icon" id="icon-q6-A"></span></label>
<label><input name="q6" onchange="showOptionIcon('q6', 'B', 'B')" type="radio" value="B"/> B. \( 5 \)<span class="option-icon" id="icon-q6-B"></span></label>
<label><input name="q6" onchange="showOptionIcon('q6', 'C', 'B')" type="radio" value="C"/> C. \( \sqrt{5} \)<span class="option-icon" id="icon-q6-C"></span></label>
<label><input name="q6" onchange="showOptionIcon('q6', 'D', 'B')" type="radio" value="D"/> D. \( 25 \)<span class="option-icon" id="icon-q6-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q6', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q6')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q6"></div>
</div>
</div>

<!-- C√¢u 7 -->
<div class="question" id="q7">
<div class="summary-box">
<p><strong>C√¢u 7</strong>. N·∫øu h√†m s·ªë \( y = f(x) \) li√™n t·ª•c tr√™n \( \mathbb{R} \) th·ªèa m√£n \( f(x) < f(2), \forall x \in (1 ; 3) \setminus \{2\} \) th√¨:</p>

<div class="options">
<label><input name="q7" onchange="showOptionIcon('q7', 'A', 'B')" type="radio" value="A"/> A. 2 l√† ƒëi·ªÉm c·ª±c ti·ªÉu c·ªßa h√†m s·ªë.<span class="option-icon" id="icon-q7-A"></span></label>
<label><input name="q7" onchange="showOptionIcon('q7', 'B', 'B')" type="radio" value="B"/> B. 2 l√† ƒëi·ªÉm c·ª±c ƒë·∫°i c·ªßa h√†m s·ªë.<span class="option-icon" id="icon-q7-B"></span></label>
<label><input name="q7" onchange="showOptionIcon('q7', 'C', 'B')" type="radio" value="C"/> C. Gi√° tr·ªã l·ªõn nh·∫•t c·ªßa h√†m s·ªë b·∫±ng \( f(2) \).<span class="option-icon" id="icon-q7-C"></span></label>
<label><input name="q7" onchange="showOptionIcon('q7', 'D', 'B')" type="radio" value="D"/> D. Gi√° tr·ªã nh·ªè nh·∫•t c·ªßa h√†m s·ªë b·∫±ng \( f(2) \).<span class="option-icon" id="icon-q7-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q7', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q7')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q7"></div>
</div>
</div>

<!-- C√¢u 8 -->
<div class="question" id="q8">
<div class="summary-box">
<p><strong>C√¢u 8</strong>. T√≠ch v√¥ h∆∞·ªõng c·ªßa hai vector \( \vec{a}, \vec{b} \) trong kh√¥ng gian ƒë∆∞·ª£c t√≠nh b·∫±ng:</p>

<div class="options">
<label><input name="q8" onchange="showOptionIcon('q8', 'A', 'C')" type="radio" value="A"/> A. \( |\vec{a}| . |\vec{b}| \)<span class="option-icon" id="icon-q8-A"></span></label>
<label><input name="q8" onchange="showOptionIcon('q8', 'B', 'C')" type="radio" value="B"/> B. \( |\vec{a}| . |\vec{b}| . \sin (\vec{a}, \vec{b}) \)<span class="option-icon" id="icon-q8-B"></span></label>
<label><input name="q8" onchange="showOptionIcon('q8', 'C', 'C')" type="radio" value="C"/> C. \( |\vec{a}| . |\vec{b}| . \cos (\vec{a}, \vec{b}) \)<span class="option-icon" id="icon-q8-C"></span></label>
<label><input name="q8" onchange="showOptionIcon('q8', 'D', 'C')" type="radio" value="D"/> D. \( |\vec{a}| . |\vec{b}| . (\vec{a}, \vec{b}) \)<span class="option-icon" id="icon-q8-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q8', 'C')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q8')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q8"></div>
</div>
</div>

<!-- C√¢u 9 -->
<div class="question" id="q9">
<div class="summary-box">
<p><strong>C√¢u 9</strong>. Cho h√†m s·ªë \( y = f(x) \) c√≥ ƒë·ªì th·ªã nh∆∞ H√¨nh 3. G·ªçi \( H \) l√† ph·∫ßn di·ªán t√≠ch h√¨nh ph·∫≥ng ƒë∆∞·ª£c t√¥ m√†u. Th·ªÉ t√≠ch \( V \) c·ªßa kh·ªëi tr√≤n xoay t·∫°o th√†nh khi cho h√¨nh ph·∫≥ng \( H \) quay quanh tr·ª•c \( Ox \) l√†:</p>
<img alt="" loading="lazy" src="data/anh2/5.9.png"/><br/>

<div class="options">
<label><input name="q9" onchange="showOptionIcon('q9', 'A', 'D')" type="radio" value="A"/> A. \( V = \pi \int_2^0 [f(x)]^2 \, dx \)<span class="option-icon" id="icon-q9-A"></span></label>
<label><input name="q9" onchange="showOptionIcon('q9', 'B', 'D')" type="radio" value="B"/> B. \( V = \int_2^0 [f(x)]^2 \, dx \)<span class="option-icon" id="icon-q9-B"></span></label>
<label><input name="q9" onchange="showOptionIcon('q9', 'C', 'D')" type="radio" value="C"/> C. \( V = \int_0^2 [f(x)]^2 \, dx \)<span class="option-icon" id="icon-q9-C"></span></label>
<label><input name="q9" onchange="showOptionIcon('q9', 'D', 'D')" type="radio" value="D"/> D. \( V = \pi \int_0^2 [f(x)]^2 \, dx \)<span class="option-icon" id="icon-q9-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q9', 'D')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q9')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q9"></div>
</div>
</div>

<!-- C√¢u 10 -->
<div class="question" id="q10">
<div class="summary-box">
<p><strong>C√¢u 10</strong>. X√©t m·∫´u s·ªë li·ªáu gh√©p nh√≥m cho b·ªüi B·∫£ng 1. G·ªçi \( \bar{x} \) l√† s·ªë trung b√¨nh c·ªông c·ªßa m·∫´u s·ªë li·ªáu gh√©p nh√≥m. Ph∆∞∆°ng sai c·ªßa m·∫´u s·ªë li·ªáu gh√©p nh√≥m ƒë√≥ ƒë∆∞·ª£c t√≠nh b·∫±ng c√¥ng th·ª©c n√†o d∆∞·ªõi ƒë√¢y?</p>
<img alt="" loading="lazy" src="data/anh2/5.10.png"/><br/>

<div class="options">
<label><input name="q10" onchange="showOptionIcon('q10', 'A', 'A')" type="radio" value="A"/> A. \( s^2 = \frac{n_1 (x_1 - \bar{x})^2 + n_2 (x_2 - \bar{x})^2 + \ldots + n_m (x_m - \bar{x})^2}{n} \)<span class="option-icon" id="icon-q10-A"></span></label>
<label><input name="q10" onchange="showOptionIcon('q10', 'B', 'A')" type="radio" value="B"/> B. \( s = \sqrt{\frac{n_1 (x_1 - \bar{x})^2 + n_2 (x_2 - \bar{x})^2 + \ldots + n_m (x_m - \bar{x})^2}{m}} \)<span class="option-icon" id="icon-q10-B"></span></label>
<label><input name="q10" onchange="showOptionIcon('q10', 'C', 'A')" type="radio" value="C"/> C. \( s = \sqrt{\frac{n_1 (x_1 - \bar{x})^2 + n_2 (x_2 - \bar{x})^2 + \ldots + n_m (x_m - \bar{x})^2}{n}} \)<span class="option-icon" id="icon-q10-C"></span></label>
<label><input name="q10" onchange="showOptionIcon('q10', 'D', 'A')" type="radio" value="D"/> D. \( s^2 = \frac{n_1 (x_1 - \bar{x})^2 + n_2 (x_2 - \bar{x})^2 + \ldots + n_m (x_m - \bar{x})^2}{m} \)<span class="option-icon" id="icon-q10-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q10', 'A')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q10')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q10"></div>
</div>
</div>

<!-- C√¢u 11 -->
<div class="question" id="q11">
<div class="summary-box">
<p><strong>C√¢u 11</strong>. Trong kh√¥ng gian t·ªça ƒë·ªô \( Oxyz \), m·∫∑t c·∫ßu \( (S) \) c√≥ t√¢m \( I(2 ; 1 ; -1) \) v√† ƒë∆∞·ªùng k√≠nh 6 c√≥ ph∆∞∆°ng tr√¨nh l√†:</p>

<div class="options">
<label><input name="q11" onchange="showOptionIcon('q11', 'A', 'B')" type="radio" value="A"/> A. \( (x - 2)^2 + (y - 1)^2 + (z + 1)^2 = 36 \)<span class="option-icon" id="icon-q11-A"></span></label>
<label><input name="q11" onchange="showOptionIcon('q11', 'B', 'B')" type="radio" value="B"/> B. \( (x - 2)^2 + (y - 1)^2 + (z + 1)^2 = 9 \)<span class="option-icon" id="icon-q11-B"></span></label>
<label><input name="q11" onchange="showOptionIcon('q11', 'C', 'B')" type="radio" value="C"/> C. \( (x + 2)^2 + (y + 1)^2 + (z - 1)^2 = 9 \)<span class="option-icon" id="icon-q11-C"></span></label>
<label><input name="q11" onchange="showOptionIcon('q11', 'D', 'B')" type="radio" value="D"/> D. \( (x + 2)^2 + (y + 1)^2 + (z - 1)^2 = 36 \)<span class="option-icon" id="icon-q11-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q11', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q11')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q11"></div>
</div>
</div>

<!-- C√¢u 12 -->
<div class="question" id="q12">
<div class="summary-box">
<p><strong>C√¢u 12</strong>. Cho h√†m s·ªë \( y = f(x) \) li√™n t·ª•c tr√™n \( \mathbb{R} \) th·ªèa m√£n \( \int_0^2 f(x) \, dx = 4, \int_1^2 f(x) \, dx = 3 \). Gi√° tr·ªã c·ªßa bi·ªÉu th·ª©c \( \int_0^1 f(x) \, dx \) b·∫±ng:</p>

<div class="options">
<label><input name="q12" onchange="showOptionIcon('q12', 'A', 'B')" type="radio" value="A"/> A. 7<span class="option-icon" id="icon-q12-A"></span></label>
<label><input name="q12" onchange="showOptionIcon('q12', 'B', 'B')" type="radio" value="B"/> B. 1<span class="option-icon" id="icon-q12-B"></span></label>
<label><input name="q12" onchange="showOptionIcon('q12', 'C', 'B')" type="radio" value="C"/> C. 12<span class="option-icon" id="icon-q12-C"></span></label>
<label><input name="q12" onchange="showOptionIcon('q12', 'D', 'B')" type="radio" value="D"/> D. 0.75<span class="option-icon" id="icon-q12-D"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkAnswer('q12', 'B')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q12')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q12"></div>
</div>
</div>
<h3>Ph·∫ßn II: Tr·∫Øc Nghi·ªám ƒê√∫ng/Sai - t·ª´ c√¢u 13 ƒë·∫øn c√¢u 16</h3>

<!-- C√¢u 13 -->
<div class="question" id="q13">
<div class="summary-box">
<p><strong>C√¢u 13</strong>. Trong kh√¥ng gian t·ªça ƒë·ªô \( Oxyz \), cho hai m·∫∑t ph·∫≥ng \( (P_1): 2x + y + 2z - 1 = 0 \) v√† \( (P_2): x - 2y - 2z - 7 = 0 \).</p>

<div class="options">
<p>a) Vector c√≥ t·ªça ƒë·ªô \( (2 ; 2 ; 1) \) l√† m·ªôt vector ph√°p tuy·∫øn c·ªßa m·∫∑t ph·∫≥ng \( (P_1) \).</p>
<label><input name="q13a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13a-ƒê√∫ng"></span></label>
<label><input name="q13a" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13a-Sai"></span></label>
<p>b) Vector c√≥ t·ªça ƒë·ªô \( (1 ; -2 ; -2) \) l√† m·ªôt vector ph√°p tuy·∫øn c·ªßa m·∫∑t ph·∫≥ng \( (P_2) \).</p>
<label><input name="q13b" type="showOptionIcon('q13b', 'ƒê√∫ng')" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13b-ƒê√∫ng"></span></label>
<label><input name="q13b" type="radio" onchange="showOptionIcon('q13b', 'Sai')" value="Sai"/> Sai<span class="option-icon" id="icon-q13b-Sai"></span></label>
<p>c) Cosin c·ªßa g√≥c gi·ªØa hai vector \( \vec{n}_1 = (2 ; 1 ; 2) \) v√† \( \vec{n}_2 = (1 ; -2; -2) \) b·∫±ng \( -\frac{4}{9} \).</p>
<label><input name="q13c" type="showOptionIcon('q13c', 'ƒê√∫ng')" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13c-ƒê√∫ng"></span></label>
<label><input name="radio" type="showOptionIcon('q13c', 'Sai')" value="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13c-Sai"></span></label>
<p>d) G√≥c gi·ªØa hai m·∫∑t ph·∫≥ng \( (P_1) \) v√† \( (P_2) \) b·∫±ng \( 116^\circ} \).</p>
<label><input name="q13d" type="showOptionIcon('q13d', 'ƒê√∫ng')" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q13d-ƒê√∫ng"></span></label>
<label><input name="q13d" type="showOptionIcon('q13d', 'Sai')" value="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q13d-Sai"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkTrueFalseAnswer('q13', ['Sai', 'ƒê√∫ng', 'ƒê√∫ng', 'Sai'])">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q13')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q13"></div>
</div>
</div>

<!-- C√¢u 14 -->
<div class="question" id="q14">
<div class="summary-box">
<p><strong>C√¢u 14</strong>. Cho h√†m s·ªë \( y = \frac{2x - 1}{x - 1} \).</p>

<div class="options">
<p>a) ƒê·∫°o h√†m c·ªßa h√†m s·ªë ƒë√£ cho l√† \( y' = \frac{-1}{(x - 1)^2} \).</p>
<label><input name="q14a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q14a-ƒê√∫ng"></span></label>
<label><input name="q14a" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q14a-Sai"></span></label>
<p>b) ƒê·∫°o h√†m c·ªßa h√†m s·ªë ƒë√£ cho nh·∫≠n gi√° tr·ªã √¢m v·ªõi m·ªçi \( x \neq 1 \).</p>
<label><input name="q14b" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q14b-ƒê√∫ng"></span></label>
<label><input name="q14b" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q14b-Sai"></span></label>
<p>c) B·∫£ng bi·∫øn thi√™n c·ªßa h√†m s·ªë ƒë√£ cho l√†:<br/>
<img alt="" loading="lazy" src="data/anh2/5.14c.png"/><br/>

<label><input name="q14c" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q14c-ƒê√∫ng"></span></label>
<label><input name="q14c" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q14c-Sai"></span></label>
<p>d) ƒê·ªì th·ªã h√†m s·ªë ƒë√£ cho nh∆∞ ·ªü H√¨nh 4:<br/>
<img alt="" loading="lazy" src="data/anh2/5.14d.png"/><br/>

<label><input name="q14d" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q14d-ƒê√∫ng"></span></label>
<label><input name="q14d" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q14d-Sai"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkTrueFalseAnswer('q14', ['ƒê√∫ng', 'ƒê√∫ng', 'Sai', 'ƒê√∫ng'])">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q14')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q14"></div>
</div>
</div>

<!-- C√¢u 15 -->
<div class="question" id="q15">
<div class="summary-box">
<p><strong>C√¢u 15</strong>. M·ªôt chi·∫øc xe ƒëang ch·∫°y v·ªõi v·∫≠n t·ªëc \( 20 \, \mathrm{m/s} \). Ng∆∞·ªùi l√°i xe ƒë·∫°p phanh l√†m xe chuy·ªÉn ƒë·ªông ch·∫≠m d·∫ßn ƒë·ªÅu v·ªõi gia t·ªëc \( a = -5 \, \mathrm{m/s^2} \).</p>

<div class="options">
<p>a) Khi xe d·ª´ng h·∫≥n th√¨ v·∫≠n t·ªëc b·∫±ng \( 0 \, \mathrm{m/s} \).</p>
<label><input name="q15a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q15a-ƒê√∫ng"></span></label>
<label><input name="q15a" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q15a-Sai"></span></label>
<p>b) Th·ªùi gian t·ª´ l√∫c ng∆∞·ªùi l√°i xe ƒë·∫°p phanh cho ƒë·∫øn khi xe d·ª´ng h·∫≥n l√† \( 5 \, \mathrm{s} \).</p>
<label><input name="q15b" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q15b-ƒê√∫ng"></span></label>
<label><input name="q15b" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q15b-Sai"></span></label>
<p>c) \( \int (-5t + 20) \, dt = \frac{-5t^2}{2} + 20t + C \).</p>
<label><input name="q15c" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q15c-ƒê√∫ng"></span></label>
<label><input name="q15c" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q15c-Sai"></span></label>
<p>d) Qu√£ng ƒë∆∞·ªùng t·ª´ l√∫c ƒë·∫°p phanh cho ƒë·∫øn khi xe d·ª´ng h·∫≥n l√† \( 400 \, \mathrm{m} \).</p>
<label><input name="q15d" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q15d-ƒê√∫ng"></span></label>
<label><input name="q15d" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q15d-Sai"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkTrueFalseAnswer('q15', ['ƒê√∫ng', 'Sai', 'ƒê√∫ng', 'Sai'])">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q15')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q15"></div>
</div>
</div>

<!-- C√¢u 16 -->
<div class="question" id="q16">
<div class="summary-box">
<p><strong>C√¢u 16</strong>. NƒÉm 2001, C·ªông ƒë·ªìng Ch√¢u √Çu c√≥ l√†m m·ªôt ƒë·ª£t ki·ªÉm tra r·∫•t r·ªông r√£i c√°c con b√≤ ƒë·ªÉ ph√°t hi·ªán nh·ªØng con b·ªã b·ªánh b√≤ ƒëi√™n. Ng∆∞·ªùi ta ti·∫øn h√†nh m·ªôt lo·∫°i x√©t nghi·ªám v√† cho k·∫øt qu·∫£ nh∆∞ sau: Khi con b√≤ b·ªã b·ªánh b√≤ ƒëi√™n th√¨ x√°c su·∫•t ƒë·ªÉ ra ph·∫£n ·ª©ng d∆∞∆°ng t√≠nh trong x√©t nghi·ªám l√† \( 70\% \); c√≤n khi con b√≤ kh√¥ng b·ªã b·ªánh th√¨ x√°c su·∫•t ƒë·ªÉ x·∫£y ra ph·∫£n ·ª©ng d∆∞∆°ng t√≠nh trong x√©t nghi·ªám ƒë√≥ l√† \( 10\% \). Bi·∫øt r·∫±ng t·ªâ l·ªá b√≤ b·ªã m·∫Øc b·ªánh b√≤ ƒëi√™n ·ªü H√† Lan l√† 1,3 con tr√™n 100000 con. G·ªçi \( X \) l√† bi·∫øn c·ªë m·ªôt con b√≤ b·ªã b·ªánh b√≤ ƒëi√™n, \( Y \) l√† bi·∫øn c·ªë m·ªôt con b√≤ ph·∫£n ·ª©ng d∆∞∆°ng t√≠nh v·ªõi x√©t nghi·ªám.</p>

<div class="options">
<p>a) \( P(X) = 13 \cdot 10^{-6} \).</p>
<label><input name="q16a" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q16a-ƒê√∫ng"></span></label>
<label><input name="q16a" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q16a-Sai"></span></label>
<p>b) \( P(Y \mid X) = 0.07 \).</p>
<label><input name="q16b" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q16b-ƒê√∫ng"></span></label>
<label><input name="q16b" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q16b-Sai"></span></label>
<p>c) \( P(Y \mid \bar{X}) = 0.1 \).</p>
<label><input name="q16c" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q16c-ƒê√∫ng"></span></label>
<label><input name="q16c" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q16c-Sai"></span></label>
<p>d) \( P(Y \cap X) = 91 \cdot 10^{-8} \).</p>
<label><input name="q16d" type="radio" value="ƒê√∫ng"/> ƒê√∫ng<span class="option-icon" id="icon-q16d-ƒê√∫ng"></span></label>
<label><input name="q16d" type="radio" value="Sai"/> Sai<span class="option-icon" id="icon-q16d-Sai"></span></label>
</div></div>
<div class="answer-check">
<button onclick="checkTrueFalseAnswer('q16', ['ƒê√∫ng', 'Sai', 'ƒê√∫ng', 'Sai'])">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q16')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q16"></div>
</div>
</div>
<h3>Ph·∫ßn III: Tr·∫Øc Nghi·ªám Tr·∫£ L·ªùi Ng·∫Øn - t·ª´ c√¢u 17 ƒë·∫øn c√¢u 22</h3>

<!-- C√¢u 17 -->
<div class="question" id="q17">
<div class="summary-box">
<p><strong>C√¢u 17</strong>. Gi·∫£ s·ª≠ \( \int (0.1)^x \, dx = -\frac{1}{\ln a} b^x + C \). V·ªõi \( a, b \) l√† c√°c h·∫±ng s·ªë d∆∞∆°ng. Gi√° tr·ªã c·ªßa bi·ªÉu th·ª©c \( \frac{a}{b} \) b·∫±ng bao nhi√™u?</p>
</div>
<div class="answer-check">
<input type="text" id="input-q17" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q17', '100')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q17')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q17"></div>
<div class="answer-feedback" id="feedback-q17"></div>
</div>
</div>

<!-- C√¢u 18 -->
<div class="question" id="q18">
<div class="summary-box">
<p><strong>C√¢u 18</strong>. M·ªôt m√°y bay c·∫•t c√°nh v·ªõi gia t·ªëc kh√¥ng ƒë·ªïi, v·∫≠n t·ªëc sau 3 gi√¢y ƒë·∫°t 240 km/h. H√¨nh 6 m√¥ t·∫£ m·∫∑t ƒë·∫•t l√† m·∫∑t ph·∫≥ng, m√°y bay bay t·ª´ v·ªã tr√≠ \( I \) ƒë·∫øn v·ªã tr√≠ \( A \). ƒê·ªô cao \( AH \) c·ªßa m√°y bay so v·ªõi m·∫∑t ƒë·∫•t sau khi m√°y bay r·ªùi kh·ªèi m·∫∑t ƒë·∫•t 3 gi√¢y l√† bao nhi√™u m√©t (l√†m tr√≤n k·∫øt qu·∫£ ƒë·∫øn h√†ng ƒë∆°n v·ªã)?</p>
<img alt="" loading="lazy" src="data/anh2/5.18.png"/><br/>

</div>
<div class="answer-check">
<input type="text" id="input-q18" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q18', '72')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q18')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q18"></div>
<div class="answer-feedback" id="feedback-q18"></div>
</div>
</div>

<!-- C√¢u 19 -->
<div class="question" id="q19">
<div class="summary-box">
<p><strong>C√¢u 19</strong>. M·ªôt doanh nghi·ªáp h·ªó tr·ª£ cho b·ªën ng∆∞·ªùi d√¢n b·ªã th·∫•t nghi·ªáp ·ªü m·ªôt khu ph·ªë l√† 5 tri·ªáu ƒë·ªìng/ng∆∞·ªùi v·ªõi ƒëi·ªÅu ki·ªán nh∆∞ sau: Ng∆∞·ªùi th·∫•t nghi·ªáp c·ªßa khu ph·ªë l√†m vi·ªác t·∫°p v·ª• cho doanh nghi·ªáp trong nhi·ªÅu ng√†y li√™n ti·∫øp. Sau ng√†y ƒë·∫ßu ti√™n, doanh nghi·ªáp tr·∫£ 110 ngh√¨n ƒë·ªìng/ng∆∞·ªùi. B·∫Øt ƒë·∫ßu t·ª´ ng√†y th·ª© hai, m·ªói ng√†y tƒÉng th√™m 20 ngh√¨n ƒë·ªìng/ng∆∞·ªùi so v·ªõi ng√†y h√¥m tr∆∞·ªõc. M·ªói ng∆∞·ªùi th·∫•t nghi·ªáp ph·∫£i l√†m cho doanh nghi·ªáp ƒë√≥ √≠t nh·∫•t bao nhi√™u ng√†y ƒë·ªÉ c√≥ ƒë∆∞·ª£c h∆°n 5 tri·ªáu ƒë·ªìng (l√†m tr√≤n k·∫øt qu·∫£ ƒë·∫øn h√†ng ƒë∆°n v·ªã)?</p>
</div>
<div class="answer-check">
<input type="text" id="input-q19" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q19', '18')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q19')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q19"></div>
<div class="answer-feedback" id="feedback-q19"></div>
</div>
</div>

<!-- C√¢u 20 -->
<div class="question" id="q20">
<div class="summary-box">
<p><strong>C√¢u 20</strong>. B√°c H√† l·∫≠p l·∫°i m·∫≠t kh·∫©u cho t√†i kho·∫£n thanh to√°n tr·ª±c tuy·∫øn. Khi l·∫≠p m·∫≠t kh·∫©u, h·ªá th·ªëng b√°o v·ªÅ s·ªë ƒëi·ªán tho·∫°i c·ªßa b√°c m√£ OTP l√† m·ªôt d√£y 4 k√Ω t·ª±, m·ªói k√Ω t·ª± l√† m·ªôt ch·ªØ s·ªë, ch·ªØ s·ªë 0 c√≥ th·ªÉ ƒë·ª©ng ƒë·∫ßu. X√°c su·∫•t c·ªßa bi·∫øn c·ªë: M√£ OTP l√† d√£y k√Ω t·ª± \( abcd \) v·ªõi \( a < b < c < d \) l√† bao nhi√™u (l√†m tr√≤n k·∫øt qu·∫£ ƒë·∫øn h√†ng ph·∫ßn trƒÉm)?</p>
</div>
<div class="answer-check">
<input type="text" id="input-q20" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q20', '0,02')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q20')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q20"></div>
<div class="answer-feedback" id="feedback-q20"></div>
</div>
</div>

<!-- C√¢u 21 -->
<div class="question" id="q21">
<div class="summary-box">
<p><strong>C√¢u 21</strong>. M·ªôt x√≠ nghi·ªáp m·ªói ng√†y s·∫£n xu·∫•t ra 2000 s·∫£n ph·∫©m trong ƒë√≥ c√≥ 39 s·∫£n ph·∫©m l·ªói. L·∫ßn l∆∞·ª£t l·∫•y ra ng·∫´u nhi√™n hai s·∫£n ph·∫©m kh√¥ng ho√†n l·∫°i ƒë·ªÉ ki·ªÉm tra. T√≠nh x√°c su·∫•t c·ªßa bi·∫øn c·ªë: S·∫£n ph·∫©m l·∫•y ra l·∫ßn th·ª© hai b·ªã l·ªói (l√†m tr√≤n k·∫øt qu·∫£ ƒë·∫øn h√†ng ph·∫ßn trƒÉm)?</p>
</div>
<div class="answer-check">
<input type="text" id="input-q21" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q21', '0,02')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q21')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q21"></div>
<div class="answer-feedback" id="feedback-q21"></div>
</div>
</div>

<!-- C√¢u 22 -->
<div class="question" id="q22">
<div class="summary-box">
<p><strong>C√¢u 22</strong>. T·ª´ m·ªôt t·∫•m b√¨a m·ªèng h√¨nh vu√¥ng c·∫°nh \( 6 \, \mathrm{dm} \), b·∫°n Hoa c·∫Øt b·ªè b·ªën tam gi√°c c√¢n b·∫±ng nhau c√≥ c·∫°nh ƒë√°y l√† c·∫°nh c·ªßa h√¨nh vu√¥ng ban ƒë·∫ßu v√† ƒë·ªânh l√† ƒë·ªânh c·ªßa m·ªôt h√¨nh vu√¥ng nh·ªè ph√≠a trong r·ªìi g·∫≠p l√™n, gh√©p l·∫°i t·∫°o th√†nh m·ªôt kh·ªëi ch√≥p t·ª© gi√°c ƒë·ªÅu (H√¨nh 7). Th·ªÉ t√≠ch c·ªßa kh·ªëi ch√≥p c√≥ gi√° tr·ªã l·ªõn nh·∫•t b·∫±ng bao nhi√™u decimet kh·ªëi (l√†m tr√≤n k·∫øt qu·∫£ ƒë·∫øn h√†ng ph·∫ßn trƒÉm)?</p>
<img alt="" loading="lazy" src="data/anh2/5.22.png"/><br/>
</div>
<div class="answer-check">
<input type="text" id="input-q22" placeholder="Nh·∫≠p ƒë√°p √°n">
<button onclick="checkShortAnswer('q22', '7,3')">Ki·ªÉm tra</button>
<button class="solution-toggle" onclick="toggleSolution('solution-q22')">Xem l·ªùi gi·∫£i</button>
<div class="solution" id="solution-q22"></div>
<div class="answer-feedback" id="feedback-q22"></div>
</div>
</div>






 <div class="score-section">
 <h3>T√≠nh t·ªïng ƒëi·ªÉm</h3>
    <p>Nh·∫≠p h·ªç v√† t√™n:</p>
    <input id="student-name" type="text" placeholder="H·ªç v√† t√™n"/>   
<button onclick="calculateScore()">T√≠nh ƒëi·ªÉm</button>
<div id="score-result"></div>
</div>

  <script>
    function showOptionIcon(questionId, selectedValue, correctAnswer) {
      if (!checkedQuestions[questionId]) return;
      ['A', 'B', 'C', 'D'].forEach(letter => {
        const iconSpan = document.getElementById(`icon-${questionId}-${letter}`);
        if (iconSpan) iconSpan.innerHTML = '';
      });
      const icon = selectedValue === correctAnswer ? '‚úÖ' : '‚ùå';
      const selectedSpan = document.getElementById(`icon-${questionId}-${selectedValue}`);
      if (selectedSpan) selectedSpan.innerHTML = icon;
    }

    function showTFOptionIcon(name, selectedValue, correctValue, questionId) {
      if (!checkedQuestions[questionId]) return;
      const icon = selectedValue === correctValue ? '‚úÖ' : '‚ùå';
      const span = document.getElementById(`icon-${name}`);
      if (span) span.innerHTML = icon;
    }

    
    function lockQuestionInputs(questionId) {
    const radios = document.querySelectorAll(`input[name="${questionId}"]`);
    radios.forEach(input => input.disabled = true);
}

    function addSolutionLink(questionId, url) {
      if (!checkedQuestions[questionId]) return;
      const container = document.getElementById(`feedback-${questionId}`);
      if (container && !container.querySelector("a")) {
        const link = document.createElement("a");
        link.href = url;
        link.target = "_blank";
        link.style.marginLeft = "10px";
        link.textContent = "Xem l·ªùi gi·∫£i";
        container.appendChild(link);
      }
    }

    var studentAnswers = {};
    var checkedQuestions = {};
    var isScoreCalculated = false;

    function checkAnswer(questionId, correctAnswer) {
      if (checkedQuestions[questionId]) return;
      const inputs = document.getElementsByName(questionId);
      let selectedAnswer = null;
      for (let input of inputs) {
        if (input.checked) {
          selectedAnswer = input.value;
          break;
        }
      }
      studentAnswers[questionId] = selectedAnswer;
      checkedQuestions[questionId] = true;
      lockQuestionInputs(questionId);
      showOptionIcon(questionId, selectedAnswer, correctAnswer);
      addSolutionLink(questionId, `giai/${questionId}.html`);
    }

    function checkTrueFalseAnswer(questionId, correctAnswers) {
  for (let i = 0; i < correctAnswers.length; i++) {
    const name = questionId + String.fromCharCode(97 + i);
    const inputs = document.getElementsByName(name);
    let selected = '';
    for (const input of inputs) {
      if (input.checked) {
        selected = input.value;
        break;
      }
    }

    const iconId = `icon-${name}`;
    let icon = document.getElementById(iconId);
    if (!icon && inputs.length) {
      icon = document.createElement('span');
      icon.id = iconId;
      icon.className = 'option-icon';
      inputs[0].parentNode.appendChild(icon);
    }
    if (icon) {
      icon.innerHTML = selected === correctAnswers[i] ? '‚úÖ' : '‚ùå';
    }
  }
}
   function checkShortAnswer(questionId, correctAnswer) {
      if (checkedQuestions[questionId]) return;
      const input = document.getElementById('input-' + questionId);
      const feedback = document.getElementById('feedback-' + questionId);

      // T·ª± ƒë·ªông t·∫°o span hi·ªÉn th·ªã n·∫øu ch∆∞a t·ªìn t·∫°i
      let icon = document.getElementById('icon-' + questionId);
      if (!icon && input) {
        icon = document.createElement('span');
        icon.id = 'icon-' + questionId;
        icon.className = 'option-icon';
        icon.setAttribute('aria-label', 'Bi·ªÉu t∆∞·ª£ng ki·ªÉm tra');
        input.insertAdjacentElement('afterend', icon);
      }

      if (!input) {
        feedback.innerHTML = 'L·ªói: Kh√¥ng t√¨m th·∫•y input cho c√¢u h·ªèi!';
        feedback.className = 'answer-feedback incorrect';
        return;
      }

      const value = input.value.trim();
      if (value === '') {
        feedback.innerHTML = 'Vui l√≤ng nh·∫≠p ƒë√°p √°n!';
        feedback.className = 'answer-feedback incorrect';
        if (icon) icon.innerHTML = '';
        return;
      }

      if (!isNaN(correctAnswer)) {
        const numeric = parseFloat(value);
        if (isNaN(numeric)) {
          feedback.innerHTML = 'Vui l√≤ng nh·∫≠p m·ªôt s·ªë h·ª£p l·ªá!';
          feedback.className = 'answer-feedback incorrect';
          if (icon) icon.innerHTML = '';
          return;
        }
        const correct = parseFloat(correctAnswer);
        if (Math.abs(numeric - correct) < 0.001) {
          feedback.innerHTML = 'ƒê√∫ng!';
          feedback.className = 'answer-feedback correct';
          studentAnswers[questionId] = numeric;
          if (icon) icon.innerHTML = '‚úÖ';
        } else {
          feedback.innerHTML = 'Sai!';
          feedback.className = 'answer-feedback incorrect';
          studentAnswers[questionId] = numeric;
          if (icon) icon.innerHTML = '‚ùå';
        }
      } else {
        if (value === correctAnswer) {
          feedback.innerHTML = 'ƒê√∫ng';
            feedback.className = 'answer-feedback correct';
          studentAnswers[questionId] = value;
          if (icon) icon.innerHTML = '‚úÖ';
        } else {
          feedback.innerHTML = 'Sai!';
          feedback.className = 'answer-feedback incorrect';
          studentAnswers[questionId] = value;
          if (icon) icon.innerHTML = '‚ùå';
        }
      }
}
    function calculateScore() {
  if (isScoreCalculated) return;
/* @@ */
  const correctAnswers = {
    q1: 'D',
    q2: 'A',
    q3: 'C',
    q4: 'A',
    q5: 'B',
    q6: 'B',
    q7: 'D',
    q8: 'C',
    q9: 'C',
    q10: 'A',
    q11: 'A',
    q12: 'D',
    q13: ['ƒê√∫ng',  'Sai', 'ƒê√∫ng', 'ƒê√∫ng'],
    q14: ['ƒê√∫ng', 'Sai','ƒê√∫ng',  'ƒê√∫ng'],
    q15: ['ƒê√∫ng', 'Sai','Sai', 'Sai'],
    q16: ['ƒê√∫ng', 'ƒê√∫ng', 'ƒê√∫ng','Sai'],
    q17: '8976',
    q18: '688',
    q19: '16',
    q20: '6',
    q21: '126',
    q22: '10'
  };

  let studentAnswers = {};

  // C√¢u 1 ‚Üí 12: Tr·∫Øc nghi·ªám ABCD
  for (let i = 1; i <= 12; i++) {
    const name = 'q' + i;
    const selected = document.querySelector(`input[name="${name}"]:checked`);
    if (selected) {
      studentAnswers[name] = selected.value.trim();
    }
  }

  // C√¢u 13 ‚Üí 16: ƒê√∫ng / Sai t·ª´ng m·ªánh ƒë·ªÅ
  for (let i = 13; i <= 16; i++) {
    const subAnswers = [];
    ['a', 'b', 'c', 'd'].forEach(letter => {
      const inputName = `q${i}${letter}`;
      const selected = document.querySelector(`input[name="${inputName}"]:checked`);
      if (selected) {
        subAnswers.push(selected.value.trim());
      } else {
        subAnswers.push(''); // Kh√¥ng ch·ªçn g√¨
      }
    });
    studentAnswers['q' + i] = subAnswers;
    console.log(`q${i}:`, subAnswers);  // Ghi ra console
  }

  // C√¢u 17 ‚Üí 22: T·ª± lu·∫≠n (text input)
  // C√¢u 17 ‚Üí 22: T·ª± lu·∫≠n (text input)
for (let i = 17; i <= 22; i++) {
  const input = document.getElementById(`input-q${i}`);
  if (input) {
    studentAnswers['q' + i] = input.value.trim().replace(',', '.');
  }
}
  // B·∫Øt ƒë·∫ßu t√≠nh ƒëi·ªÉm
  let totalScore = 0;

  for (let i = 1; i <= 22; i++) {
    const key = 'q' + i;
    const userAns = studentAnswers[key];
    const correctAns = correctAnswers[key];

    if (i >= 1 && i <= 12) {
      if (userAns && userAns === correctAns) totalScore += 0.25;
    } else if (i >= 13 && i <= 16) {
      if (Array.isArray(userAns) && Array.isArray(correctAns)) {
        let correctCount = 0;
        for (let j = 0; j < correctAns.length; j++) {
          if (userAns[j] === correctAns[j]) correctCount++;
        }
        console.log(`C√¢u ${key} ƒë√∫ng ${correctCount} ph·∫ßn`);
        if (correctCount === 1) totalScore += 0.1;
        else if (correctCount === 2) totalScore += 0.25;
        else if (correctCount === 3) totalScore += 0.5;
        else if (correctCount === 4) totalScore += 1;
      }
    } else if (i >= 17 && i <= 22) {
      const user = parseFloat(userAns?.toString().replace(',', '.'));
      const correct = parseFloat(correctAns?.toString().replace(',', '.'));
      if (!isNaN(user) && !isNaN(correct) && Math.abs(user - correct) < 0.001) {
        totalScore += 0.5;
      }
    }
    }
  const scoreElement = document.getElementById("score-result");
  scoreElement.textContent = `T·ªïng ƒëi·ªÉm c·ªßa b·∫°n: ${totalScore.toFixed(2)} / 10`;
  scoreElement.className = "correct";
  isScoreCalculated = true;
}

let allowShowSolution = true; // ƒê·∫∑t th√†nh false n·∫øu mu·ªën kh√≥a l·ªùi gi·∫£i

  function toggleSolution(id) {
    if (!allowShowSolution) {
      alert("L·ªùi gi·∫£i ƒëang b·ªã kh√≥a. Li√™n h·ªá gi√°o vi√™n ƒë·ªÉ m·ªü.");
      return;
    }
    const el = document.getElementById(id);
    if (el) {
      el.classList.toggle("hidden");
      el.classList.toggle('visible');
    }
  }

  function showVideoSolution(url, qid) {
    if (!allowShowSolution) {
      alert("L·ªùi gi·∫£i ƒëang b·ªã kh√≥a. Li√™n h·ªá gi√°o vi√™n ƒë·ªÉ m·ªü.");
      return;
    }
    window.open(url, '_blank');
  }
  </script>
    <script src="recorder.js"></script>
         
<script type="module">

      // Import c√°c h√†m c·∫ßn thi·∫øt t·ª´ Firebase SDK
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getFirestore, doc, onSnapshot, setDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

// --- 1. C·∫§U H√åNH V√Ä KH·ªûI T·∫†O ---
const firebaseConfig = {
    apiKey: "AIzaSyDDACFZgZazMOnjzmGM_lrKswVcsoTFHxA",
    authDomain: "veonline-3bcbf.firebaseapp.com",
    projectId: "veonline-3bcbf",
    storageBucket: "veonline-3bcbf.appspot.com",
    messagingSenderId: "83902304195",
    appId: "1:83902304195:web:2f9ec1ee0c23d6e21bb776"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// L·∫•y c√°c ph·∫ßn t·ª≠ DOM
const canvas = document.getElementById("drawCanvas");
const ctx = canvas.getContext("2d");
const toggleBtn = document.getElementById("toggleDraw");
const toolbar = document.getElementById("drawToolbar");
const clearBtn = document.getElementById("clearBtn");
const saveBtn = document.getElementById("saveBtn");
const exitBtn = document.getElementById("exitBtn");
const colorPicker = document.getElementById("colorPicker");
const toolSelect = document.getElementById("tool");
const widthPicker = document.getElementById("draw-width");

// --- 2. BI·∫æN TO√ÄN C·ª§C V√Ä TR·∫†NG TH√ÅI ---
let isDrawing = false;
let isDrawMode = false;
let currentTool = "pen";
let lineWidth = 2;
// T·∫°o m·ªôt ID duy nh·∫•t cho client n√†y ƒë·ªÉ kh√¥ng v·∫Ω l·∫°i h√†nh ƒë·ªông c·ªßa ch√≠nh m√¨nh
const clientId = Date.now().toString(36) + Math.random().toString(36).substr(2);

// Tham chi·∫øu ƒë·∫øn c√°c document tr√™n Firestore
const liveEventDoc = doc(db, "sharedDrawing", "live_event");
const canvasStateDoc = doc(db, "sharedDrawing", "canvas_state");

// --- 3. C√ÅC H√ÄM TI·ªÜN √çCH ---

// Thay ƒë·ªïi k√≠ch th∆∞·ªõc canvas v√† load l·∫°i tr·∫°ng th√°i c≈©
function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    // Khi resize, load l·∫°i tr·∫°ng th√°i canvas ƒë√£ l∆∞u ƒë·ªÉ h√¨nh kh√¥ng b·ªã m·∫•t
    loadCanvasState(); 
}

// L·∫•y t·ªça ƒë·ªô (chu·ªôt ho·∫∑c ch·∫°m)
function getPos(e) {
    if (e.touches && e.touches.length > 0) {
        return { x: e.touches[0].clientX, y: e.touches[0].clientY };
    }
    return { x: e.clientX, y: e.clientY };
}

// *** H√ÄM M·ªöI: Chuy·ªÉn t·ªça ƒë·ªô pixel tuy·ªát ƒë·ªëi sang t·ªça ƒë·ªô t∆∞∆°ng ƒë·ªëi (0-1) ***
function toNormalized(pos) {
    return {
        x: pos.x / canvas.width,
        y: pos.y / canvas.height
    };
}

// *** H√ÄM M·ªöI: Chuy·ªÉn t·ªça ƒë·ªô t∆∞∆°ng ƒë·ªëi v·ªÅ t·ªça ƒë·ªô pixel tr√™n canvas hi·ªán t·∫°i ***
function fromNormalized(normPos) {
    return {
        x: normPos.x * canvas.width,
        y: normPos.y * canvas.height
    };
}

// --- 4. C√ÅC H√ÄM G·ª¨I D·ªÆ LI·ªÜU L√äN FIREBASE ---

// G·ª≠i s·ª± ki·ªán v·∫Ω (start, move, clear)
async function sendDrawEvent(type, data = {}) {
    await setDoc(liveEventDoc, {
        clientId: clientId, // G·ª≠i k√®m ID ƒë·ªÉ c√°c client kh√°c bi·∫øt ai ƒë√£ v·∫Ω
        type: type,
        ...data,
    });
}

// L∆∞u tr·∫°ng th√°i to√†n b·ªô canvas (d∆∞·ªõi d·∫°ng ·∫£nh)
function saveCanvasState() {
    const dataUrl = canvas.toDataURL();
    setDoc(canvasStateDoc, { image: dataUrl });
}

// --- 5. C√ÅC H√ÄM V·∫º N·ªòI B·ªò ---

// H√†m v·∫Ω d·ª±a tr√™n d·ªØ li·ªáu s·ª± ki·ªán nh·∫≠n ƒë∆∞·ª£c
function drawFromEvent(event) {
    // Kh√¥ng v·∫Ω l·∫°i h√†nh ƒë·ªông c·ªßa ch√≠nh m√¨nh
    if (event.clientId === clientId) return;

    const { type, normPos, color, width, tool } = event;

    // Chuy·ªÉn t·ªça ƒë·ªô t∆∞∆°ng ƒë·ªëi v·ªÅ pixel c·ªßa m√°y n√†y
    const pos = normPos ? fromNormalized(normPos) : null;
    
    ctx.strokeStyle = color || colorPicker.value;
    ctx.lineWidth = width || lineWidth;
    ctx.lineCap = "round";

    switch (type) {
        case 'start':
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
            break;
        case 'move':
            // Ch·ªâ v·∫Ω n·∫øu c√≥ m·ªôt ƒëi·ªÉm b·∫Øt ƒë·∫ßu
            if (ctx.beginPath) { 
                ctx.lineTo(pos.x, pos.y);
                ctx.stroke();
            }
            break;
        case 'clear':
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            break;
    }
}


// --- 6. G·∫ÆN K·∫æT S·ª∞ KI·ªÜN ---

window.addEventListener("resize", resizeCanvas);

toggleBtn.onclick = () => {
    isDrawMode = true;
    canvas.style.display = "block";
    toolbar.style.display = "flex";
    resizeCanvas(); // ƒê·∫£m b·∫£o canvas c√≥ k√≠ch th∆∞·ªõc ƒë√∫ng ngay khi b·∫≠t
};

exitBtn.onclick = () => {
    isDrawMode = false;
    canvas.style.display = "none";
    toolbar.style.display = "none";
};

clearBtn.onclick = () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    sendDrawEvent('clear'); // G·ª≠i s·ª± ki·ªán x√≥a cho ng∆∞·ªùi kh√°c
    saveCanvasState(); // L∆∞u tr·∫°ng th√°i tr·ªëng
};

saveBtn.onclick = () => {
    const link = document.createElement("a");
    link.download = "ban_ve.png";
    link.href = canvas.toDataURL();
    link.click();
};

toolSelect.onchange = () => (currentTool = toolSelect.value);
widthPicker.oninput = () => (lineWidth = parseInt(widthPicker.value));


// B·∫Øt ƒë·∫ßu v·∫Ω
function startDraw(e) {
    if (!isDrawMode) return;
    e.preventDefault();
    isDrawing = true;

    const pos = getPos(e);
    ctx.strokeStyle = colorPicker.value;
    ctx.lineWidth = lineWidth;
    ctx.lineCap = "round";

    ctx.beginPath();
    ctx.moveTo(pos.x, pos.y);

    // G·ª≠i s·ª± ki·ªán b·∫Øt ƒë·∫ßu v·∫Ω v·ªõi t·ªça ƒë·ªô ƒë√£ chu·∫©n h√≥a
    sendDrawEvent('start', {
        normPos: toNormalized(pos),
        color: colorPicker.value,
        width: lineWidth,
        tool: currentTool
    });
}

// ƒêang v·∫Ω
function drawMove(e) {
    if (!isDrawing || !isDrawMode) return;
    e.preventDefault();
    const pos = getPos(e);

    ctx.lineTo(pos.x, pos.y);
    ctx.stroke();

    // G·ª≠i s·ª± ki·ªán di chuy·ªÉn v·ªõi t·ªça ƒë·ªô ƒë√£ chu·∫©n h√≥a
    sendDrawEvent('move', {
        normPos: toNormalized(pos)
    });
}

// K·∫øt th√∫c v·∫Ω
function endDraw() {
    if (!isDrawing) return;
    isDrawing = false;
    // Khi v·∫Ω xong, l∆∞u l·∫°i to√†n b·ªô tr·∫°ng th√°i c·ªßa canvas
    // ƒë·ªÉ ng∆∞·ªùi m·ªõi v√†o sau c√≥ th·ªÉ th·∫•y ƒë∆∞·ª£c
    saveCanvasState();
}

canvas.addEventListener("mousedown", startDraw);
canvas.addEventListener("mousemove", drawMove);
canvas.addEventListener("mouseup", endDraw);
canvas.addEventListener("mouseleave", endDraw); // Th√™m ƒë·ªÉ x·ª≠ l√Ω khi chu·ªôt ra ngo√†i

canvas.addEventListener("touchstart", startDraw, { passive: false });
canvas.addEventListener("touchmove", drawMove, { passive: false });
canvas.addEventListener("touchend", endDraw);


// --- 7. L·∫ÆNG NGHE D·ªÆ LI·ªÜU T·ª™ FIREBASE ---

// H√†m t·∫£i tr·∫°ng th√°i canvas ƒë√£ l∆∞u (cho ng∆∞·ªùi m·ªõi v√†o)
function loadCanvasState() {
    onSnapshot(canvasStateDoc, (docSnap) => {
        if (docSnap.exists()) {
            const data = docSnap.data();
            if (data.image) {
                const img = new Image();
                img.onload = () => {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                };
                img.src = data.image;
            }
        }
    });
}

// L·∫Øng nghe c√°c s·ª± ki·ªán v·∫Ω theo th·ªùi gian th·ª±c
onSnapshot(liveEventDoc, (docSnap) => {
    if (docSnap.exists()) {
        const eventData = docSnap.data();
        drawFromEvent(eventData);
    }
});

// Kh·ªüi t·∫°o
resizeCanvas(); // G·ªçi l·∫ßn ƒë·∫ßu ƒë·ªÉ thi·∫øt l·∫≠p k√≠ch th∆∞·ªõc v√† t·∫£i tr·∫°ng th√°i

</script>




</body>
</html>
